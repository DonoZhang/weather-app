(window.webpackJsonpweatherapp=window.webpackJsonpweatherapp||[]).push([[0],{27:function(e,t,r){e.exports=r.p+"static/media/loading.768b228e.gif"},29:function(e,t,r){e.exports=r(47)},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),c=r(16),i=r.n(c),o=r(20),s=r(11),u=r(19),p="FIRE_SAGA",l="GET_API_DATA",m="API_DATA_RECEIVED",h="REQUEST_ERROR",f="SET_CITY";function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach(function(t){Object(u.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var g={};function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var v={city:"Melbourne"},w=Object(s.c)({posts:function(e,t){if(!e)return g;switch(t.type){case l:return b({},e,{loading:!0,error:""});case m:return b({},e,{payload:t.payload,loading:!1,error:""});case h:return b({},e,{loading:!1,error:t.error});default:return e}},city:function(e,t){if(!e)return v;switch(t.type){case f:return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(r,!0).forEach(function(t){Object(u.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{city:t.city});default:return e}}}),O=r(28),j=r(14),E=r.n(j),x=r(13),k={requestApiData:function(){return{type:l}},receiveApiData:function(e){return{type:m,payload:e}},getErrorMessage:function(e){return{type:h,error:e}},fireSaga:function(){return{type:p}},setCity:function(e){return{type:f,city:e}}},D=r(26),C="fetching error",S="city error",T="unknown error";function N(e){return P.apply(this,arguments)}function P(){return(P=Object(D.a)(E.a.mark(function e(t){var r,a;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,",AU&units=metric&APPID=42905b45c73a2763dd8827a8d802be68"));case 3:if(200!==(r=e.sent).status){e.next=10;break}return e.next=7,r.json();case 7:a=e.sent,e.next=11;break;case 10:a=404===r.status?S:T;case 11:return e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),e.abrupt("return",C);case 17:case"end":return e.stop()}},e,null,[[0,14]])}))).apply(this,arguments)}var U=E.a.mark(R),A=E.a.mark(W),M="There is a problem with fetching data, please check your internet connection.",_="Sorry, we cannot find the town you are looking for :(",I="Sorry, unknown error happened";function R(){var e,t;return E.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(x.b)(k.requestApiData());case 2:return r.next=4,z.getState().city.city;case 4:return e=r.sent,r.prev=5,r.next=8,Object(x.a)(N,e);case 8:t=r.sent,r.t0=t,r.next=r.t0===C?12:r.t0===S?15:r.t0===T?18:21;break;case 12:return r.next=14,Object(x.b)(k.getErrorMessage(M));case 14:return r.abrupt("break",23);case 15:return r.next=17,Object(x.b)(k.getErrorMessage(_));case 17:return r.abrupt("break",23);case 18:return r.next=20,Object(x.b)(k.getErrorMessage(I));case 20:return r.abrupt("break",23);case 21:return r.next=23,Object(x.b)(k.receiveApiData(t));case 23:r.next=29;break;case 25:return r.prev=25,r.t1=r.catch(5),r.next=29,Object(x.b)(k.getErrorMessage(r.t1.message));case 29:case"end":return r.stop()}},U,null,[[5,25]])}function W(){return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.c)(k.fireSaga().type,R);case 2:case"end":return e.stop()}},A)}var H=W,q=Object(O.a)(),z=Object(s.e)(w,Object(s.a)(q)),B=r(5),F=r(6),G=r(8),J=r(7),L=r(9),Y=(r(40),function(e){function t(){var e,r;Object(B.a)(this,t);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(r=Object(G.a)(this,(e=Object(J.a)(t)).call.apply(e,[this].concat(n)))).onSubmit=function(){r.props.emitEvent&&r.props.emitEvent()},r}return Object(L.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props.buttonText;return n.a.createElement("button",{className:"button-component","data-test":"buttonComponent",onClick:this.onSubmit},e)}}]),t}(a.Component)),Q=(r(41),function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(G.a)(this,Object(J.a)(t).call(this))).onTextChange=function(t){var r=t.target.value;e.setState({textEntered:r}),e.props.emitEvent&&e.props.emitEvent(r)},e.state={textEntered:""},e}return Object(L.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"text-input","data-test":"text-input"},n.a.createElement("input",{type:"text",placeholder:this.props.placeholder,onChange:this.onTextChange,value:this.state.textEntered}))}}]),t}(a.Component)),V=(r(42),function(e){function t(){return Object(B.a)(this,t),Object(G.a)(this,Object(J.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"error-page","data-test":"error-page"},n.a.createElement("div",{className:"error-message","data-test":"error-message"},n.a.createElement("p",null,this.props.errorMessage)))}}]),t}(a.Component)),K=r(27),X=r.n(K),Z=(r(43),function(){return n.a.createElement("div",{className:"loading-page","data-test":"loading-page"},n.a.createElement("img",{"data-test":"loading-image",src:X.a,alt:"loading"}))});function $(e){var t=new Date,r=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()).getTime(),a=new Date(r+1e3*e),n=a.getHours(),c=a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes();return"".concat(n,":").concat(c)}r(44);var ee=function(e){function t(e){var r;return Object(B.a)(this,t),(r=Object(G.a)(this,Object(J.a)(t).call(this,e)))._updateTime=function(){r.setState({time:$(r.props.timezone)})},r.state={time:null},r}return Object(L.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this._updateTime(),this.timeUpdater=setInterval(this._updateTime,3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeUpdater)}},{key:"render",value:function(){var e=this.props.city,t=this.props.weather;return n.a.createElement("div",{className:"weather-page","data-test":"weather-page"},n.a.createElement("div",{className:"city-name","data-test":"city-name"},e),n.a.createElement("div",{className:"time-component","data-test":"time-component"},this.state.time),n.a.createElement("div",{className:"weather-information","data-test":"weather-information"},n.a.createElement("div",{className:"weather-icon","data-test":"weather-icon"},n.a.createElement("img",{src:"https://openweathermap.org/img/w/".concat(t.icon,".png"),alt:"weather logo"})),n.a.createElement("div",{className:"weather-brief","data-test":"weather-brief"},t.weatherBrief)),n.a.createElement("div",{className:"temperature","data-test":"temperature"},n.a.createElement("div",{className:"temperature-current","data-test":"temperature-current"},t.temperature,"\u2103"),n.a.createElement("div",{className:"temperature-range","data-test":"temperature-range"},n.a.createElement("div",{className:"temperature-highest","data-test":"temperature-highest"},t.temperatureHigh,"\u2103"),n.a.createElement("div",{className:"temperature-lowest","data-test":"temperature-lowest"},t.temperatureLow,"\u2103"))))}}]),t}(a.Component),te=function(e){return{weather:{weatherBrief:e.weather[0].main,weatherDescription:e.weather[0].description,icon:e.weather[0].icon,temperature:e.main.temp,temperatureLow:e.main.temp_min,temperatureHigh:e.main.temp_max,visibility:e.visibility,windSpeed:e.wind.speed,windDegree:e.wind.deg,sunrise:e.sys.sunrise,sunset:e.sys.sunset},city:e.name,timezone:e.timezone}},re=(r(45),function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(G.a)(this,Object(J.a)(t).call(this)))._checkStatus=function(){var t=e.props,r=t.payload,a=t.loading,c=t.error;if(a)return n.a.createElement(Z,null);if(c.length>0)return n.a.createElement(V,{errorMessage:c});var i=te(r);return n.a.createElement(ee,i)},e.onTextInputChange=function(t){e.setState({city:t})},e.onSubmit=function(){e.props.setCity(e.state.city)},e.weatherUpdate=function(){e.props.fetchWeatherData()},e.state={city:void 0},e}return Object(L.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this.setState({city:this.props.city}),this.weatherUpdate(),this.weatherUpdateTimer=setInterval(this.weatherUpdate,18e5)}},{key:"componentWillUnmount",value:function(){clearInterval(this.weatherUpdateTimer)}},{key:"render",value:function(){var e=this,t={placeholder:"Please enter the town name",emitEvent:this.onTextInputChange},r={buttonText:"Change City",emitEvent:function(){e.onSubmit(),e.props.fetchWeatherData()}};return n.a.createElement("div",{className:"app"},n.a.createElement("div",{className:"city-search","data-test":"city-search"},n.a.createElement(Q,t),n.a.createElement(Y,r)),n.a.createElement("div",{className:"page-display","data-test":"page-display"},this._checkStatus()))}}]),t}(a.Component));re.defaultProps={payload:{name:"Nothing yet"},loading:!1,error:"No error",fetchWeatherData:function(){console.log("Need to pass in a function")}};var ae=Object(o.b)(function(e){var t=e.posts,r=e.city.city;return{payload:t.payload,loading:t.loading,error:t.error,city:r}},function(e){return{fetchWeatherData:function(){return e(k.fireSaga())},setCity:function(t){return e(k.setCity(t))}}})(re);r(46);q.run(H),i.a.render(n.a.createElement(o.a,{store:z},n.a.createElement(ae,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.70053bcb.chunk.js.map